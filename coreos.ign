{"ignition":{"version":"3.3.0"},"kernelArguments":{"shouldExist":["spectre_v2=on","spec_store_bypass_disable=on","l1tf=full,force","mds=full,nosmt","tsx=off","txs_async_abort=full,nosmt","kvm.nx_huge_pages=force","nosmt=force","l1d_flush=on","mmio_stable_data=full,nosmt","random.trust_bootloader=off","random.trust_cpu=off","intel_iommu=on","amd_iommu=on","iommu.passthrough=0 iommu.strict=1","slab_nomerge","init_on_alloc=1","init_on_free=1","pti=on","vsyscall=none","page_alloc.shuffle=1","randomize_kstack_offset=on","extra_latent_entropy","defubfs=off"]},"passwd":{"users":[{"groups":["wheel","sudo","docker"],"name":"core","passwordHash":"$y$j9T$jFCECSzAMayax6L/LNHaE1$0X7OErFgoOHiN6WOPBImBiPlNJB9e6YRU.3fWTYgx/B"}]},"storage":{"files":[{"path":"/etc/ssh/sshd_config.d/10-custom.conf","contents":{"compression":"","source":"data:,X11Forwarding%20no%0AGSSAPIAuthentication%20no%0A"}},{"path":"/etc/zincati/config.d/51-rollout-wariness.toml","contents":{"compression":"","source":"data:,%5Bidentity%5D%0Arollout_wariness%20%3D%200%0A"}},{"path":"/etc/zincati/config.d/55-updates-strategy.toml","contents":{"compression":"gzip","source":"data:;base64,H4sIAAAAAAAC/2SNMarEMAxEe51C6ADB1S8+5BRbGmNMLLIGRw62TMieflGRats3b2b8PHNSHgGG9qS837gindxLy2UjePLlQQG0HBw/TdjM2rZUjRD4H3e5iuR2hQA53QNX9EivKYT2lrpGK9qK+3eOoLLs+o5Hkals+p+DbwAAAP//4Po2vKAAAAA="}},{"overwrite":true,"path":"/etc/tuned/active_profile","contents":{"compression":"","source":"data:,virtual-guest%0A"}},{"overwrite":true,"path":"/etc/tuned/profile_mode","contents":{"compression":"","source":"data:,manual%0A"}},{"overwrite":true,"path":"/etc/systemd/zram-generator.conf","contents":{"compression":"","source":"data:;base64,IyBUaGlzIGNvbmZpZyBmaWxlIGVuYWJsZXMgYSAvZGV2L3pyYW0wIGRldmljZSB3aXRoIHRoZSBkZWZhdWx0IHNldHRpbmdzClt6cmFtMF0KenJhbS1mcmFjdGlvbiA9IDEKbWF4LXpyYW0tc2l6ZSA9IDgxOTIK"}},{"overwrite":true,"path":"/etc/security/limits.d/30-disable-coredump.conf","contents":{"compression":"","source":"data:,*%20hard%20core%200%0A"}},{"overwrite":true,"path":"/etc/ssh/ssh_config.d/10-custom.conf","contents":{"compression":"","source":"data:,GSSAPIAuthentication%20no%0AVerifyHostKeyDNS%20yes%0A"}},{"overwrite":true,"path":"/etc/unbound/unbound.conf","contents":{"compression":"gzip","source":"data:;base64,H4sIAAAAAAAC/5RSwW7TQBC95ytW5jxx2qYlssSxSEggEOXCceodr0fdzLqzswnp16NNcFAKQsKWLHvee+N5byeT7ki7hXP9qClZ55pmsXAOiyUwLdkApR+TwsCROte0O9Q28mNb5DEV8W1VLZ/o0CycuxBkDoKRJXTuQHnhXGXCEx0gkxgLxRNQdTFDT2rwWMTX37RkfZtzbGs1tz0eYR64R6O87NVmFU8jae5c8+Xr5/cfPt6/e/j+8O3+09HEyJ5gNJugZFLAQGLzMEeMfZ3EDhfFo4mTh4v6jjRzkvPQnuQAKL/FqJ4EMIYEPu0lKHrKr9CIGgieCyn/gSkNpIoRJrTxFZbHdIxnyPxCM8ZBkhL0HoaI55i3+AOKn+DEvFm9va7F5Esk6JMMHDrX7DCyR0vq2EjrSz2/Z8EtwZaFt5zROAlkU+7PqRXZoxh5UJriAWxUymOKvnNXq9NVSZmgxynDkBTYnwNLxUJiCTBVLxPplq1z7mp1vYa729ub24VzUw3B+rP9+bvuza9GQ9I9qoeXJFQXt87cuWZZDcxYXY0yZVPC7dxqxtB77dxmebzfeMnLkFKI9FfKern+F+V6tbrq1pu71enRbTabzf/x1xf9fwYAAP//ovvB6I8DAAA="}},{"path":"/etc/systemd/system/unbound.service.d/override.conf","contents":{"compression":"gzip","source":"data:;base64,H4sIAAAAAAAC/2yRwWrcQAyG7/sUgh5ySo69Gbwk3nbJxiypQwullPFY2QjPjIykMfGlz15m6S415GT504hf883Pl0T2a/OEkWV5wLR8FzJs3tFnw8ok4+YoNDvDB5zJo65YF6fLPxt6+8oRV+A+sB/XhJMJhy/CedJV5xElYTjw6SP8xEMOl/RP0L2RQi/oRoWslE6g7Ec04MmIk0KgEeFG+Vb83OfXmzto3qdAniwsMJC6PiC8ssBMSj0FsuVundjlVA6tlzkK+4rSeSjg5hnVhLxth0FQdeciBUKttrvf+7bp4N/3cynapjvs28dSvrT7H9fZZ3TB6OLt26KG8d6FsBX/RiUzC2qVnNH8f3tHwVCqP7UviqH2U77FmIMr94d6wD6foB5xkWKnjmd/EDkng5p7ZQ5oCLWgchaPel2odRF1cuWtF9TNgf14RFFOrlg6s78BAAD//2tKTgg2AgAA"}},{"path":"/etc/docker/daemon.json","contents":{"compression":"gzip","source":"data:;base64,H4sIAAAAAAAC/7SOsQ7CIBCG9z7F5eYS9iYdfA7jgEhtUwrNcdTB9N3NIZqOLg6E5Pvv//I/GwC8ucFkz4py4Glx2AFSDhZbCStM2IEcv0myamUy1n0pAK6GR+nqzZDOiXy0xuvrFHRpFN1HIMoT3cV6rhgAlVq94SHS0ld9ewyD40ekuR9jYqzBpfx7e5w2b8vfdon711GNvL15BQAA//+R8WAAZAEAAA=="}}],"links":[{"path":"/etc/localtime","target":"../usr/share/zoneinfo/America/New_York"},{"path":"/etc/systemd/system/multi-user.target.wants/unbound.service","target":"/usr/lib/systemd/system/unbound.service"},{"path":"/etc/systemd/system/multi-user.target.wants/tuned.service","target":"/usr/lib/systemd/system/tuned.service"},{"path":"/etc/systemd/system/kdump.service.target","target":"/dev/null"}]},"systemd":{"units":[{"contents":"[Unit]\nDescription=Initial System Setup\nAfter=systemd-machine-id-commit.service\nAfter=network-online.target\nBefore=zincati.service\nConditionPathExists=!/var/lib/%N.stamp\n\n[Service]\nType=oneshot\nRemainAfterExit=yes\nExecStart=/usr/bin/sed -r -i 's/#DNSSEC=.*$/DNSSEC=yes/m' /etc/systemd/resolved.conf\nExecStart=/usr/bin/sed -r -i 's/#DNSOverTLS=.*$/DNSOverTLS=yes/m' /etc/systemd/resolved.conf\nExecStart=/usr/bin/sed -r -i 's/#Cache=.*$/Cache=yes/m' /etc/systemd/resolved.conf\nExecStart=/usr/bin/sed -r -i 's/#DNS=.*$/DNS=1.1.1.2#cloudflare-dns.com?ip=1.1.1.2\u0026name=Cloudflare\u0026blockedif=zeroip 2606:4700:4700::1112#cloudflare-dns.com?ip=2606:4700:4700::1112\u0026name=Cloudflare\u0026blockedif=zeroip/m' /etc/systemd/resolved.conf\nExecStart=/usr/bin/sed -r -i 's/#FallbackDNS=.*$/DNS=8.8.4.4#dns.google 2001:4860:4860::8844#dns.google/m' /etc/systemd/resolved.conf\nExecStart=/usr/bin/systemctl restart systemd-resolved\nExecStart=/usr/bin/rpm-ostree install firewalld qemu-guest-agent tuned unbound\nExecStart=/usr/bin/rpm-ostree override remove cifs-utils samba-common-libs samba-client-libs libsmbclient libwbclient samba-common sssd-krb5-common sssd-ipa sssd-nfs-idmap sssd-ldap sssd-client sssd-ad sssd-common sssd-krb5 sssd-common-pac\nExecStart=/usr/bin/sed -i 's/nullok//g' /etc/pam.d/system-auth\nExecStart=/usr/bin/bash -c 'if curl -s --head --request GET \"https://raw.githubusercontent.com/Kicksecure/security-misc/master/etc/modprobe.d/30_security-misc.conf\" | grep -E \"200 OK|HTTP/[0-9]+ 200\" \u003e /dev/null; then curl \"https://raw.githubusercontent.com/Kicksecure/security-misc/master/etc/modprobe.d/30_security-misc.conf\" -o \"/etc/modprobe.d/30_security-misc.conf\"; fi'\nExecStart=/usr/bin/bash -c 'if curl -s --head --request GET \"https://raw.githubusercontent.com/Kicksecure/security-misc/master/etc/sysctl.d/30_security-misc.conf\" | grep -E \"200 OK|HTTP/[0-9]+ 200\" \u003e /dev/null; then curl \"https://raw.githubusercontent.com/Kicksecure/security-misc/master/etc/sysctl.d/30_security-misc.conf\" -o \"/etc/sysctl.d/30_security-misc.conf\"; fi'\nExecStart=/usr/usr/bin/sed -i 's/kernel.yama.ptrace_scope=2/kernel.yama.ptrace_scope=1/g' /etc/sysctl.d/30_security-misc.conf\nExecStart=/usr/bin/sed -i 's/net.ipv4.icmp_echo_ignore_all=1/net.ipv4.icmp_echo_ignore_all=0/g' /etc/sysctl.d/30_security-misc.conf\nExecStart=/usr/bin/sed -i 's/net.ipv6.icmp_echo_ignore_all=1/net.ipv6.icmp_echo_ignore_all=0/g' /etc/sysctl.d/30_security-misc.conf\nExecStart=/usr/bin/bash -c 'if curl -s --head --request GET \"https://raw.githubusercontent.com/Kicksecure/security-misc/master/etc/sysctl.d/30_silent-kernel-printk.conf\" | grep -E \"200 OK|HTTP/[0-9]+ 200\" \u003e /dev/null; then curl \"https://raw.githubusercontent.com/Kicksecure/security-misc/master/etc/sysctl.d/30_silent-kernel-printk.conf\" -o \"/etc/sysctl.d/30_silent-kernel-printk.conf\"; fi'\nExecStart=/usr/bin/bash -c 'if curl -s --head --request GET \"https://raw.githubusercontent.com/Kicksecure/security-misc/master/etc/sysctl.d/30_security-misc_kexec-disable.conf\" | grep -E \"200 OK|HTTP/[0-9]+ 200\" \u003e /dev/null; then curl \"https://raw.githubusercontent.com/Kicksecure/security-misc/master/etc/sysctl.d/30_security-misc_kexec-disable.conf\" -o \"/etc/sysctl.d/30_security-misc_kexec-disable.conf\"; fi'\nExecStart=/usr/bin/bash -c 'if curl -s --head --request GET \"https://raw.githubusercontent.com/GrapheneOS/infrastructure/main/chrony.conf\" | grep -E \"200 OK|HTTP/[0-9]+ 200\" \u003e /dev/null; then curl \"https://raw.githubusercontent.com/GrapheneOS/infrastructure/main/chrony.conf\" -o \"/etc/chrony.conf\"; fi'\n\nExecStart=/usr/bin/rpm-ostree install https://mirrors.rpmfusion.org/free/fedora/rpmfusion-free-release-$(rpm -E %fedora).noarch.rpm https://mirrors.rpmfusion.org/nonfree/fedora/rpmfusion-nonfree-release-$(rpm -E %fedora).noarch.rpm\nExecStart=/usr/bin/rpm-ostree install tlp tlp-rdw thermald\nExecStart=/usr/bin/rpm-ostree install fail2ban clamav clamd clamav-update\nExecStart=/usr/bin/rpm-ostree install cronie pwgen rkhunter\nExecStart=/usr/bin/rpm-ostree install python python3 python-pip python3-pip\nExecStart=/usr/bin/rpm-ostree install gcc-c++ make gcc\nExecStart=/usr/bin/rpm-ostree install java-1.8.0-openjdk java-11-openjdk java-latest-openjdk\nExecStart=/usr/bin/rpm-ostree install git nodejs\nExecStart=/usr/bin/npm -g i npm\nExecStart=/usr/bin/npm config set prefix ~/.npm\nExecStart=/usr/bin/npm -g i yarn\nExecStart=/usr/bin/rpm-ostree install golang pcre-devel\n\nExecStart=/bin/touch /var/lib/%N.stamp\nExecStart=/bin/systemctl --no-block reboot\n\n[Install]\nWantedBy=multi-user.target\n","enabled":true,"name":"postinst.service"},{"contents":"[Service]\nType=oneshot\nExecStart=/usr/sbin/setsebool container_use_cephfs off\nExecStart=/usr/sbin/setsebool virt_use_nfs off\nExecStart=/usr/sbin/setsebool virt_use_samba off\nRemainAfterExit=yes\n[Install]\nWantedBy=multi-user.target\n","enabled":true,"name":"setsebool.service"},{"enabled":true,"name":"docker.service"},{"enabled":true,"name":"fstrim.timer"},{"enabled":true,"name":"systemd-oomd.service"},{"enabled":false,"mask":true,"name":"rpm-ostree-countme.timer"},{"enabled":false,"name":"sshd.service"},{"enabled":true,"name":"sshd.socket"}]}}
