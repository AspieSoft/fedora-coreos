{"ignition":{"version":"3.3.0"},"kernelArguments":{"shouldExist":["spectre_v2=on","spec_store_bypass_disable=on","l1tf=full,force","mds=full,nosmt","tsx=off","txs_async_abort=full,nosmt","kvm.nx_huge_pages=force","nosmt=force","l1d_flush=on","mmio_stable_data=full,nosmt","random.trust_bootloader=off","random.trust_cpu=off","intel_iommu=on","amd_iommu=on","iommu.passthrough=0 iommu.strict=1","slab_nomerge","init_on_alloc=1","init_on_free=1","pti=on","vsyscall=none","page_alloc.shuffle=1","randomize_kstack_offset=on","extra_latent_entropy","defubfs=off"]},"passwd":{"users":[{"groups":["wheel","sudo","docker"],"name":"core","passwordHash":"$y$j9T$jFCECSzAMayax6L/LNHaE1$0X7OErFgoOHiN6WOPBImBiPlNJB9e6YRU.3fWTYgx/B"}]},"storage":{"files":[{"path":"/etc/ssh/sshd_config.d/10-custom.conf","contents":{"compression":"","source":"data:,X11Forwarding%20no%0AGSSAPIAuthentication%20no%0A"}},{"path":"/etc/zincati/config.d/51-rollout-wariness.toml","contents":{"compression":"","source":"data:,%5Bidentity%5D%0Arollout_wariness%20%3D%200%0A"}},{"path":"/etc/zincati/config.d/55-updates-strategy.toml","contents":{"compression":"gzip","source":"data:;base64,H4sIAAAAAAAC/2SNMarEMAxEe51C6ADB1S8+5BRbGmNMLLIGRw62TMieflGRats3b2b8PHNSHgGG9qS837gindxLy2UjePLlQQG0HBw/TdjM2rZUjRD4H3e5iuR2hQA53QNX9EivKYT2lrpGK9qK+3eOoLLs+o5Hkals+p+DbwAAAP//4Po2vKAAAAA="}},{"overwrite":true,"path":"/etc/tuned/active_profile","contents":{"compression":"","source":"data:,virtual-guest%0A"}},{"overwrite":true,"path":"/etc/tuned/profile_mode","contents":{"compression":"","source":"data:,manual%0A"}},{"overwrite":true,"path":"/etc/systemd/zram-generator.conf","contents":{"compression":"","source":"data:;base64,IyBUaGlzIGNvbmZpZyBmaWxlIGVuYWJsZXMgYSAvZGV2L3pyYW0wIGRldmljZSB3aXRoIHRoZSBkZWZhdWx0IHNldHRpbmdzClt6cmFtMF0KenJhbS1mcmFjdGlvbiA9IDEKbWF4LXpyYW0tc2l6ZSA9IDgxOTIK"}},{"overwrite":true,"path":"/etc/security/limits.d/30-disable-coredump.conf","contents":{"compression":"","source":"data:,*%20hard%20core%200%0A"}},{"overwrite":true,"path":"/etc/ssh/ssh_config.d/10-custom.conf","contents":{"compression":"","source":"data:,GSSAPIAuthentication%20no%0AVerifyHostKeyDNS%20yes%0A"}},{"path":"/etc/docker/daemon.json","contents":{"compression":"gzip","source":"data:;base64,H4sIAAAAAAAC/7SOsQ7CIBCG9z7F5eYS9iYdfA7jgEhtUwrNcdTB9N3NIZqOLg6E5Pvv//I/GwC8ucFkz4py4Glx2AFSDhZbCStM2IEcv0myamUy1n0pAK6GR+nqzZDOiXy0xuvrFHRpFN1HIMoT3cV6rhgAlVq94SHS0ld9ewyD40ekuR9jYqzBpfx7e5w2b8vfdon711GNvL15BQAA//+R8WAAZAEAAA=="}}],"links":[{"path":"/etc/localtime","target":"../usr/share/zoneinfo/America/New_York"},{"path":"/etc/systemd/system/multi-user.target.wants/tuned.service","target":"/usr/lib/systemd/system/tuned.service"},{"path":"/etc/systemd/system/kdump.service.target","target":"/dev/null"}]},"systemd":{"units":[{"contents":"[Unit]\nDescription=Initial System Setup\nAfter=systemd-machine-id-commit.service\nAfter=network-online.target\nBefore=zincati.service\n# Before=graphical.target\nConditionPathExists=!/var/lib/%N.stamp\n# ConditionFirstBoot=yes\n\n[Service]\nType=oneshot\nRemainAfterExit=yes\nExecStart=/usr/bin/sed -r -i 's/^#DNSSEC=.*$/DNSSEC=yes/m' /etc/systemd/resolved.conf\nExecStart=/usr/bin/sed -r -i 's/^#DNSOverTLS=.*$/DNSOverTLS=yes/m' /etc/systemd/resolved.conf\nExecStart=/usr/bin/sed -r -i 's/^#Cache=.*$/Cache=yes/m' /etc/systemd/resolved.conf\nExecStart=/usr/bin/sed -r -i 's/^#DNS=.*$/DNS=1.1.1.2#cloudflare-dns.com 2606:4700:4700::1112#cloudflare-dns.com/m' /etc/systemd/resolved.conf\nExecStart=/usr/bin/sed -r -i 's/^#FallbackDNS=.*$/FallbackDNS=8.8.4.4#dns.google 2001:4860:4860::8844#dns.google/m' /etc/systemd/resolved.conf\nExecStart=/usr/bin/systemctl restart systemd-resolved\n\nExecStart=/usr/bin/bash -c 'if [ \"$(timeout 10 ping -c1 google.com 2\u003e/dev/null)\" = \"\" ]; then sed -r -i 's/^DNSSEC=.*$/DNSSEC=allow-downgrade/m' /etc/systemd/resolved.conf; fi'\nExecStart=/usr/bin/systemctl restart systemd-resolved\nExecStart=/usr/bin/bash -c 'if [ \"$(timeout 10 ping -c1 google.com 2\u003e/dev/null)\" = \"\" ]; then sed -r -i 's/^DNSSEC=/#DNSSEC=/m' /etc/systemd/resolved.conf; fi'\nExecStart=/usr/bin/systemctl restart systemd-resolved\n\nExecStart=/usr/bin/rpm-ostree install --allow-inactive firewalld qemu-guest-agent tuned\nExecStart=/usr/bin/rpm-ostree override remove cifs-utils samba-common-libs samba-client-libs libsmbclient libwbclient samba-common sssd-krb5-common sssd-ipa sssd-nfs-idmap sssd-ldap sssd-client sssd-ad sssd-common sssd-krb5 sssd-common-pac\nExecStart=/usr/bin/sed -i 's/nullok//g' /etc/pam.d/system-auth\nExecStart=/usr/bin/bash -c 'if curl -s --head --request GET \"https://raw.githubusercontent.com/Kicksecure/security-misc/master/etc/modprobe.d/30_security-misc.conf\" | grep -E \"200 OK|HTTP/[0-9]+ 200\" \u003e /dev/null; then curl \"https://raw.githubusercontent.com/Kicksecure/security-misc/master/etc/modprobe.d/30_security-misc.conf\" -o \"/etc/modprobe.d/30_security-misc.conf\"; fi'\nExecStart=/usr/bin/bash -c 'if curl -s --head --request GET \"https://raw.githubusercontent.com/Kicksecure/security-misc/master/etc/sysctl.d/30_security-misc.conf\" | grep -E \"200 OK|HTTP/[0-9]+ 200\" \u003e /dev/null; then curl \"https://raw.githubusercontent.com/Kicksecure/security-misc/master/etc/sysctl.d/30_security-misc.conf\" -o \"/etc/sysctl.d/30_security-misc.conf\"; fi'\nExecStart=-/usr/bin/sed -i 's/kernel.yama.ptrace_scope=2/kernel.yama.ptrace_scope=1/g' /etc/sysctl.d/30_security-misc.conf\nExecStart=-/usr/bin/sed -i 's/net.ipv4.icmp_echo_ignore_all=1/net.ipv4.icmp_echo_ignore_all=0/g' /etc/sysctl.d/30_security-misc.conf\nExecStart=-/usr/bin/sed -i 's/net.ipv6.icmp_echo_ignore_all=1/net.ipv6.icmp_echo_ignore_all=0/g' /etc/sysctl.d/30_security-misc.conf\nExecStart=/usr/bin/bash -c 'if curl -s --head --request GET \"https://raw.githubusercontent.com/Kicksecure/security-misc/master/etc/sysctl.d/30_silent-kernel-printk.conf\" | grep -E \"200 OK|HTTP/[0-9]+ 200\" \u003e /dev/null; then curl \"https://raw.githubusercontent.com/Kicksecure/security-misc/master/etc/sysctl.d/30_silent-kernel-printk.conf\" -o \"/etc/sysctl.d/30_silent-kernel-printk.conf\"; fi'\nExecStart=/usr/bin/bash -c 'if curl -s --head --request GET \"https://raw.githubusercontent.com/Kicksecure/security-misc/master/etc/sysctl.d/30_security-misc_kexec-disable.conf\" | grep -E \"200 OK|HTTP/[0-9]+ 200\" \u003e /dev/null; then curl \"https://raw.githubusercontent.com/Kicksecure/security-misc/master/etc/sysctl.d/30_security-misc_kexec-disable.conf\" -o \"/etc/sysctl.d/30_security-misc_kexec-disable.conf\"; fi'\nExecStart=/usr/bin/bash -c 'if curl -s --head --request GET \"https://raw.githubusercontent.com/GrapheneOS/infrastructure/main/chrony.conf\" | grep -E \"200 OK|HTTP/[0-9]+ 200\" \u003e /dev/null; then curl \"https://raw.githubusercontent.com/GrapheneOS/infrastructure/main/chrony.conf\" -o \"/etc/chrony.conf\"; fi'\n\nExecStart=/usr/bin/rpm-ostree install --allow-inactive https://mirrors.rpmfusion.org/free/fedora/rpmfusion-free-release-39.noarch.rpm https://mirrors.rpmfusion.org/nonfree/fedora/rpmfusion-nonfree-release-39.noarch.rpm\nExecStart=/usr/bin/rpm-ostree install --allow-inactive tlp tlp-rdw thermald\n\n# ExecStart=/usr/bin/ostree remote add elxreno-preload https://copr.fedorainfracloud.org/coprs/elxreno/preload/repo/fedora-39/elxreno-preload-fedora-39.repo\n# ExecStart=/usr/bin/bash -c 'if curl -s --head --request GET \"https://download.copr.fedorainfracloud.org/results/elxreno/preload/pubkey.gpg\" | grep -E \"200 OK|HTTP/[0-9]+ 200\" \u003e /dev/null; then curl \"https://download.copr.fedorainfracloud.org/results/elxreno/preload/pubkey.gpg\" -o \"/etc/pki/rpm-gpg/RPM-GPG-KEY-elxreno-preload-39-x86_64\"; fi'\n\nExecStart=/usr/bin/rpm-ostree install --allow-inactive fail2ban clamav clamd clamav-update\nExecStart=/usr/bin/rpm-ostree install --allow-inactive cronie pwgen rkhunter\nExecStart=/usr/bin/rpm-ostree install --allow-inactive python python3 python-pip python3-pip\nExecStart=/usr/bin/rpm-ostree install --allow-inactive gcc-c++ make gcc\nExecStart=/usr/bin/rpm-ostree install --allow-inactive java-1.8.0-openjdk java-11-openjdk java-latest-openjdk\nExecStart=/usr/bin/rpm-ostree install --allow-inactive git nodejs npm\n\n# ExecStart=/usr/bin/rpm-ostree apply-live --allow-replacement\n\n# ExecStart=/usr/bin/rpm-ostree install --allow-inactive preload\n\n# ExecStart=/usr/bin/npm config set prefix ~/.npm\n# ExecStart=/usr/bin/npm -g i npm\n# ExecStart=/usr/bin/npm -g i yarn\nExecStart=/usr/bin/rpm-ostree install --allow-inactive golang pcre-devel\n\nExecStart=/usr/bin/git clone https://github.com/AspieSoft/linux-clamav-download-scanner.git /etc/linux-clamav-download-scanner\nExecStart=/bin/bash /etc/linux-clamav-download-scanner/install.sh --force\nExecStart=/usr/bin/rm -rf /etc/linux-clamav-download-scanner\n\nExecStart=/usr/bin/rpm-ostree install --allow-inactive nano neofetch btrfs-progs lvm2 xfsprogs udftools p7zip p7zip-plugins hplip hplip-gui inotify-tools\nExecStart=/usr/bin/rpm-ostree install --allow-inactive guvcview\n\nExecStart=/usr/bin/rkhunter --update -q\nExecStart=/usr/bin/rkhunter --propupd -q\n\nExecStart=/usr/bin/sed -r -i 's/^#DNSSEC=.*$/DNSSEC=yes/m' /etc/systemd/resolved.conf\nExecStart=/usr/bin/systemctl restart systemd-resolved\n\nExecStart=/bin/touch /var/lib/%N.stamp\nExecStart=/bin/systemctl --no-block reboot\n\n[Install]\nWantedBy=multi-user.target\n","enabled":true,"name":"postinst.service"},{"contents":"[Service]\nType=oneshot\nExecStart=/usr/sbin/setsebool container_use_cephfs off\nExecStart=/usr/sbin/setsebool virt_use_nfs off\nExecStart=/usr/sbin/setsebool virt_use_samba off\nRemainAfterExit=yes\n[Install]\nWantedBy=multi-user.target\n","enabled":true,"name":"setsebool.service"},{"enabled":true,"name":"docker.service"},{"enabled":true,"name":"fstrim.timer"},{"enabled":true,"name":"systemd-oomd.service"},{"enabled":false,"mask":true,"name":"rpm-ostree-countme.timer"},{"enabled":true,"name":"sshd.socket"},{"enabled":false,"name":"NetworkManager-wait-online.service"},{"enabled":false,"name":"debug-shell.service"},{"enabled":false,"name":"nfs-client.target"},{"enabled":false,"name":"remote-fs.target"}]}}
